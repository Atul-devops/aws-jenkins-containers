:icons:
:linkcss:
:imagesdir: ./images

= Title

This reference architecture demonstrates how to leverage a single delivery pipeline to deploy to multiple orchestrators. This example will show how to simultanesouly deploy to both
 ECS and Kubernetes. This demonstration could be used to deploy to hybrid scenario where you have Kubernetes on premises and ECS in the cloud. Alternatively it could also be use to deploy to
 homogenous clusters in different regions.

image::architecture.png[Architecture]



=== Pre-Requisites

A fucntioning Kubernetes cluster and config file to authenticate to the cluster, by default this is located at `~/.kube/config`

A functioning ECS cluster.

=== Deploy the CloudFormation stack

|===

|Region | Launch Template
| *N. Virginia* (us-east-1)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Ohio* (us-east-2)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-east-2#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Oregon* (us-west-2)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-west-2#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Ireland* (eu-west-1)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Frankfurt* (eu-central-1)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=eu-central-1#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Singapore* (ap-southeast-1)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=ap-southeast-1#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Sydney* (ap-southeast-2)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=ap-southeast-2#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

| *Tokyo* (ap-northeast-1)
a| image::./deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-1#/stacks/new?stackName=Codesuite-Demo&templateURL=https://s3.amazonaws.com/codesuite-demo-public/aws-kube-codesuite.yaml]

|===

=== Upload configuration file to s3 bucket

== Conclusion
